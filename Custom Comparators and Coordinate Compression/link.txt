https://usaco.guide/silver/sorting-custom?lang=cpp
The "Full Solution" part of https://usaco.guide/silver/sorting-custom?lang=cpp#example-2 explains it quite well